# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ?

‚úÖ **Backend —Å–µ—Ä–≤–µ—Ä** –Ω–∞ FastAPI —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **Frontend** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
‚úÖ **ESP8266 –∫–æ–¥** –¥–ª—è —á—Ç–µ–Ω–∏—è RFID –∫–∞—Ä—Ç –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–µ  
‚úÖ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ —Å—Ö–µ–º–∞–º–∏  

---

## üì¶ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–µ–∫—Ç–∞

```
rfid_balance_system/
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ   ‚îî‚îÄ‚îÄ start.sh            # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îî‚îÄ‚îÄ index.html          # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ
‚îú‚îÄ‚îÄ esp8266/
‚îÇ   ‚îî‚îÄ‚îÄ rfid_balance_reader.ino  # –ö–æ–¥ Arduino
‚îÇ
‚îú‚îÄ‚îÄ README.md               # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ WIRING_DIAGRAM.md      # –°—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ API_EXAMPLES.md        # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
```

---

## ‚ö° –ó–∞–ø—É—Å–∫ –∑–∞ 3 —à–∞–≥–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd server
pip install -r requirements.txt
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

**Linux/Mac:**
```bash
./start.sh
```

**Windows:**
```bash
python main.py
```

### –®–∞–≥ 3: –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:7000`

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ESP8266

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Arduino:

- MFRC522 (by GithubCommunity)
- ArduinoJson (–≤–µ—Ä—Å–∏—è 6.x)

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `esp8266/rfid_balance_reader.ino`

### 3. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ WiFi:

```cpp
const char* ssid = "YOUR_WIFI_SSID";
const char* password = "YOUR_WIFI_PASSWORD";
const char* serverUrl = "http://192.168.1.100:7000";
```

### 4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥ –Ω–∞ Wemos D1 Mini

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç —Å –∏–º–µ–Ω–µ–º –∏ UID
- üí∞ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (–±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏: +5, +10, +20, +50)
- ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ä—Ç–∞—Ö
- üîç –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ UID
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç
- üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### ESP8266:

- üì° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ RFID –∫–∞—Ä—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ —á–µ—Ä–µ–∑ WiFi
- ‚ö° –°–ø–∏—Å–∞–Ω–∏–µ 1 —Å—Ç–∏—Ä–∫–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- üîå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–µ –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WiFi

---

## üìù –ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ù–∞–∂–º–∏—Ç–µ **"‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **UID –∫–∞—Ä—Ç—ã** (–Ω–∞–ø—Ä–∏–º–µ—Ä: A1B2C3D4)
   - **–ù–∞–∑–≤–∞–Ω–∏–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤)
   - **–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä: 10)
4. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É"**

### –ö–∞–∫ —É–∑–Ω–∞—Ç—å UID –∫–∞—Ä—Ç—ã?

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥ –Ω–∞ ESP8266
2. –û—Ç–∫—Ä–æ–π—Ç–µ Serial Monitor (115200 baud)
3. –ü–æ–¥–Ω–µ—Å–∏—Ç–µ –∫–∞—Ä—Ç—É –∫ —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª—é
4. UID –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## üîå –°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è RFID

```
RFID RC522    ‚Üí  Wemos D1 Mini
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
SDA (SS)      ‚Üí  D4 (GPIO2)
SCK           ‚Üí  D5 (GPIO14)
MOSI          ‚Üí  D7 (GPIO13)
MISO          ‚Üí  D6 (GPIO12)
GND           ‚Üí  GND
RST           ‚Üí  D3 (GPIO0)
3.3V          ‚Üí  3.3V
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** RFID —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ **3.3V**!

---

## üé® –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
- –ö–∞—Ä—Ç–æ—á–∫–∏ –≤—Å–µ—Ö RFID –∫–∞—Ä—Ç
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–º—è, UID –∏ —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ–π

### –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞:
1. **–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É** - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã
2. **–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å** - –±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –∏ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥
3. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –∏ –±–∞–ª–∞–Ω—Å–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç—ã:
```bash
curl http://localhost:7000/api/cards
```

### –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç—É:
```bash
curl -X POST http://localhost:7000/api/cards \
  -H "Content-Type: application/json" \
  -d '{"rfid_uid":"TEST123","name":"Test User","balance":10}'
```

### –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å:
```bash
curl -X POST http://localhost:7000/api/cards/1/add-balance \
  -H "Content-Type: application/json" \
  -d '{"amount":10}'
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
netstat -an | grep 7000
```

### ESP8266 –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è?
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSID –∏ –ø–∞—Ä–æ–ª—å WiFi
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ WiFi –Ω–∞ —á–∞—Å—Ç–æ—Ç–µ 2.4 GHz
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Serial Monitor –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

### RFID –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–æ–≤
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø–∏—Ç–∞–Ω–∏–∏ 3.3V (–ù–ï 5V!)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å < 5 —Å–º)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª—ã –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

- **README.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- **WIRING_DIAGRAM.md** - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **API_EXAMPLES.md** - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

---

## üéØ –¢–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
   - –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∫–∞—Ä—Ç—É —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –ü–æ–ø–æ–ª–Ω—è–µ—Ç –±–∞–ª–∞–Ω—Å –Ω–∞ 20 —Å—Ç–∏—Ä–æ–∫

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
   - –ü–æ–¥–Ω–æ—Å–∏—Ç –∫–∞—Ä—Ç—É –∫ —Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª—é
   - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–ª–∞–Ω—Å
   - –ü—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –±–∞–ª–∞–Ω—Å–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Å—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞
   - –°–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è 1 —Å—Ç–∏—Ä–∫–∞

3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞:**
   - –ß–µ—Ä–µ–∑ 3 –º–∏–Ω—É—Ç—ã (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è) –º–∞—à–∏–Ω–∞ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è
   - –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–∞—Ä—Ç–µ

---

## üîí –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

‚ö†Ô∏è –≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è **–ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏**

–î–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –¥–æ–±–∞–≤—å—Ç–µ:
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- HTTPS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ  
- –ó–∞—â–∏—Ç—É –æ—Ç CSRF
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ IP

---

## üí° –ò–¥–µ–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

1. **Telegram –±–æ—Ç** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–º
2. **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –±–∞–ª–∞–Ω—Å–µ
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
4. **–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (React Native)
5. **QR –∫–æ–¥—ã** –≤–º–µ—Å—Ç–æ RFID
6. **–ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
7. **–ù–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∏—Ä–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω** —Å –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. –ü—Ä–æ—Å—Ç–æ:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ ESP8266
3. –î–æ–±–∞–≤—å—Ç–µ –∫–∞—Ä—Ç—ã
4. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π!

**–£–¥–∞—á–∏! üöÄ**
